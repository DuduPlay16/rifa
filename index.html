<!DOCTYPE html>
<html lang="pt">
<head>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDtbPZOZSivOO441D9uCb-vyLkKUKAKWnQ",
    authDomain: "rifa-a438f.firebaseapp.com",
    projectId: "rifa-a438f",
    storageBucket: "rifa-a438f.firebasestorage.app",
    messagingSenderId: "42457719190",
    appId: "1:42457719190:web:02d3d9cc313df507fd7db7"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rifa dos m√∫sicos</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0f16;
    --panel:#0f1720;
    --neon1:#00f5ff;
    --neon2:#ff3ecf;
    --accent:#ffd166;
    --glass: rgba(255,255,255,0.04);
  }

  /* reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    background: radial-gradient(circle at 10% 10%, rgba(2,6,23,1) 0%, rgba(8,11,18,1) 35%, rgba(6,7,11,1) 100%);
    font-family: "Inter",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    color:#fff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow:auto;
  }

  .bg-layer{ position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
  .bg-glow{ position:absolute; width:1600px; height:1600px; left:50%; top:-30%; transform:translateX(-50%); background: linear-gradient(135deg, rgba(0,245,255,0.08), rgba(255,62,207,0.06)); filter: blur(80px); opacity:0.9; }
  .suits { position:absolute; inset:0; z-index:0; pointer-events:none; }
  .suits .suit { position:absolute; font-size:80px; opacity:0.12; transform-origin:center; filter: drop-shadow(0 0 10px rgba(0,0,0,0.6)); animation: floatSuit linear infinite; will-change: transform, opacity; }
  @keyframes floatSuit { 0% { transform: translateY(0) rotate(0deg) scale(1); opacity:0.06; } 50% { transform: translateY(-60px) rotate(20deg) scale(1.05); opacity:0.12; } 100% { transform: translateY(0) rotate(0deg) scale(1); opacity:0.06; } }
  .cards { position:absolute; inset:0; z-index:0; pointer-events:none; }
  .card { position:absolute; width:140px; height:200px; border-radius:12px; background: linear-gradient(180deg,#ffffff 0%, #f0f0f0 100%); box-shadow: 0 20px 60px rgba(0,0,0,0.6); transform-origin:center; opacity:0.07; animation: floatCard linear infinite; }
  @keyframes floatCard { 0% { transform: translateY(0) rotate(0deg) scale(1); } 50% { transform: translateY(-40px) rotate(6deg) scale(1.02); opacity:0.12; } 100% { transform: translateY(0) rotate(0deg) scale(1); opacity:0.07; } }

  .app { position:relative; z-index:2; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px 0; }
  .center { width:100%; max-width:1100px; margin:24px; display:flex; gap:24px; align-items:flex-start; max-height: calc(100vh - 120px); overflow:auto; padding:6px; }

  .panel { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:26px; box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 18px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.04); backdrop-filter: blur(6px) saturate(120%); }
  .splash { width:100%; height:100vh; display:flex; align-items:center; justify-content:center; flex-direction:column; text-align:center; padding:40px; z-index:2; }
  .title { font-family: "Orbitron", monospace; font-size:48px; letter-spacing:2px; text-transform:uppercase; color:var(--neon1); }
  .enterBtn { margin-top:28px; padding:20px 36px; font-size:22px; border-radius:999px; border:none; cursor:pointer; color:#04111e; font-weight:700; background:linear-gradient(90deg,var(--neon1),var(--neon2)); }
  .welcomeCard { width:100%; max-width:900px; margin:auto; text-align:center; padding:36px; border-radius:14px; }

  .leftCol { flex: 1; min-width:320px; max-width:520px; }
  .rightCol { flex: 1; min-width:320px; max-width:520px; }
  h1.appTitle{ font-family:Orbitron; color:var(--neon1); font-size:28px; }
  .box { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; margin-bottom:18px; border:1px solid rgba(255,255,255,0.03); }
  input[type="text"], input[type="number"]{ width:100%; padding:14px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background: rgba(255,255,255,0.02); color:#fff; font-size:16px; }
  button.btn { padding:12px 16px; font-size:16px; border-radius:10px; border:none; cursor:pointer; background: linear-gradient(180deg,var(--neon1),var(--neon2)); color:#021018; font-weight:700; margin:6px 6px 6px 0; }
  .credits { position:fixed; right:20px; bottom:18px; z-index:5; font-size:13px; color: #ffdede; }
  @media (max-width:900px){ .center{ flex-direction:column; align-items:stretch; max-height:none; overflow:visible } .card{ display:none } }
</style>
</head>
<body>

  <div class="bg-layer" aria-hidden="true">
    <div class="bg-glow"></div>
    <div class="suits" id="bgSuits">
      <div class="suit" style="color:rgba(0,245,255,0.06)">‚ô†</div>
      <div class="suit" style="color:rgba(255,62,207,0.06)">‚ô•</div>
      <div class="suit" style="color:rgba(255,245,120,0.06)">‚ô¶</div>
      <div class="suit" style="color:rgba(0,245,255,0.05)">‚ô£</div>
      <div class="suit" style="color:rgba(255,62,207,0.05)">‚ô†</div>
      <div class="suit" style="color:rgba(255,245,120,0.05)">‚ô•</div>
      <div class="suit" style="color:rgba(0,245,255,0.04)">‚ô¶</div>
      <div class="suit" style="color:rgba(255,62,207,0.04)">‚ô£</div>
    </div>
    <div class="cards">
      <div class="card"><div class="suitTiny">‚ô†</div></div>
      <div class="card"><div class="suitTiny">‚ô•</div></div>
      <div class="card"><div class="suitTiny">‚ô¶</div></div>
    </div>
  </div>

  <div class="app">

    <div id="splashScreen" class="splash">
      <div class="panel welcomeCard" style="max-width:900px;">
        <div style="display:flex; align-items:center; gap:18px; justify-content:center; flex-direction:column;">
          <div style="display:flex; align-items:center; gap:12px; justify-content:center;">
            <div style="font-size:44px; color:var(--neon1); transform:translateY(-6px)">üéµ</div>
            <div class="title">Rifa dos m√∫sicos</div>
            <div style="font-size:44px; color:var(--neon2); transform:translateY(-6px)">üÇ°</div>
          </div>

          <div class="subtitle">Sistema de rifa feito por DuduPlay, agora ninguem rouba ninguem!</div>

          <button class="enterBtn" id="enterBtn">Entrar</button>

          <p style="margin-top:12px; font-size:13px; color:#dfefff; opacity:0.8">Feito por <b style="color:var(--neon2)">DuduPlay</b></p>
        </div>
      </div>
    </div>

    <div id="welcomeScreen" class="splash" style="display:none;">
      <div class="panel welcomeCard">
        <h2>Bem-vindo √† Rifa dos m√∫sicos!</h2>
        <p>Aqui voc√™ controla pontos, d√≠vidas e o valor das rifas. Visual neon, cartas e naipes animados para dar clima.</p>
        <button class="btn" id="toAppBtn">Entrar no sistema</button>
      </div>
    </div>

    <div id="roomScreen" class="splash" style="display:none;">
      <div class="panel welcomeCard" style="max-width:700px;">
        <h2>Sistema de Salas</h2>
        <h3 style="margin-top:18px;">Criar Sala</h3>
        <input id="newRoomName" placeholder="Nome da sala" style="margin-top:8px;">
        <input id="newRoomPass" placeholder="Senha da sala" type="password" style="margin-top:8px;">
        <button class="btn" style="margin-top:12px;" onclick="createRoom()">Criar Sala</button>

        <hr style="margin:25px 0; opacity:0.2;">

        <h3>Entrar em Sala</h3>
        <select id="roomList" style="margin-top:8px; width:100%; padding:12px;"></select>
        <input id="enterRoomPass" placeholder="Senha da sala" type="password" style="margin-top:8px;">
        <button class="btn" style="margin-top:12px;" onclick="enterRoom()">Entrar</button>
        <button class="btn danger" style="margin-top:12px; background:#8b0000;" onclick="deleteRoom()">Excluir Sala</button>
      </div>
    </div>

    <div id="mainApp" style="display:none; width:100%;">
      <div class="center">
        <div class="leftCol">
          <div class="panel box">
            <h1 class="appTitle">Sistema de Pontos e D√≠vidas</h1>

            <div style="margin-bottom:12px;">
              <label for="raffleValue" style="display:block; margin-bottom:6px; color:#dfefff">Valor da rifa</label>
              <input id="raffleValue" placeholder="Valor da rifa (ex: 10)" type="number" value="10">
            </div>

            <div style="margin-bottom:12px;">
              <label style="display:block; margin-bottom:6px; color:#dfefff">Jogadores (2 a 4)</label>
              <input id="p1" placeholder="Jogador 1">
              <input id="p2" placeholder="Jogador 2" style="margin-top:8px">
              <input id="p3" placeholder="Jogador 3 (opcional)" style="margin-top:8px">
              <input id="p4" placeholder="Jogador 4 (opcional)" style="margin-top:8px">
            </div>

            <div class="controlRow">
              <button class="btn" onclick="startGame()">Iniciar</button>
              <button class="btn" onclick="resetAll()" style="background:linear-gradient(90deg,#ff8a00,#ffd166)">Reiniciar Tudo</button>
            </div>
          </div>

          <div id="statsArea" class="panel box" style="display:none;">
            <h3 style="margin-bottom:8px">Estat√≠sticas</h3>
            <p><b>Valor da rifa:</b> R$ <span id="raffleValueDisplay">0</span></p>
            <p><b>Rifas fechadas:</b> <span id="closedRaffles">0</span></p>
            <div id="playerWins" class="statsList"></div>
          </div>
        </div>

        <div class="rightCol">
          <div id="gameArea" class="panel box" style="display:none;"></div>

          <div id="debtsArea" class="panel box" style="display:none;">
            <h3>D√≠vidas</h3>
            <div id="debts"></div>
          </div>

          <div id="historyArea" class="panel box" style="display:none;">
            <h3>Hist√≥rico da Partida</h3>
            <div id="history"></div>
            <button class="btn" style="margin-top:8px;" onclick="clearHistory()">Limpar hist√≥rico</button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="credits">Feito por DuduPlay</div>

<script>
let players = [];
let sequenceUsed = false;
let fourUsed = false;
let history = {}; let currentPartida = 1;
let points = {};
let debts = {};
let wins = {};
let raffleValue = 10;
let rafflesClosed = 0;
let currentRoom = null;

const splash = document.getElementById('splashScreen');
const welcome = document.getElementById('welcomeScreen');
const mainApp = document.getElementById('mainApp');
const roomScreen = document.getElementById('roomScreen');

document.getElementById('enterBtn').addEventListener('click', () => {
  splash.style.display = 'none';
  welcome.style.display = 'flex';
});

document.getElementById('toAppBtn').addEventListener('click', () => {
  welcome.style.display = 'none';
  roomScreen.style.display = 'flex';
  loadRooms();
});

function randomizeBgSuits(){
  const suits = document.querySelectorAll('.suits .suit');
  suits.forEach((el, i) => {
    const x = Math.random()*85;
    const y = Math.random()*85;
    el.style.left = x + '%';
    el.style.top = y + '%';
    el.style.transform = `rotate(${Math.floor(Math.random()*30-15)}deg)`;
  });
}
randomizeBgSuits();

document.addEventListener('visibilitychange', randomizeBgSuits);

/* ---- RENDER / UI ---- */
function renderGame() {
    let html = `<h2>Pontuar Jogadores</h2>`;

    players.forEach(p => {
        html += `
        <div class="box" style="padding:14px;">
            <h3 style="margin-bottom:10px">${p} ‚Äî ${points[p] || 0} pontos</h3>
            <div>
              <button class="btn" onclick="handleAction('${p}','seq')" ${sequenceUsed ? 'disabled' : ''}>Sequ√™ncia (1)</button>
              <button class="btn" onclick="handleAction('${p}','four')" ${fourUsed ? 'disabled' : ''}>Four (1)</button>
              <button class="btn" onclick="handleAction('${p}','bat9')">Batida 9 (1)</button>
              <button class="btn" onclick="handleAction('${p}','bat10')">Batida 10 (2)</button>
              <button class="btn" style="background:linear-gradient(90deg,#ff3e3e,#ff8a8a)" onclick="removerPontos('${p}',1)">Remover 1 ponto</button>
              <button class="btn" style="background:linear-gradient(90deg,#ff3e3e,#ff8a8a)" onclick="removerPontos('${p}',2)">Remover 2 ponto</button>
            </div>
        </div>
        `;
    });

    document.getElementById("gameArea").innerHTML = html;
}

function renderDebts() {
    let html = "";
    players.forEach(a => {
        html += `<h3 style="margin-bottom:6px">${a} deve:</h3>`;
        players.forEach(b => {
            if (a !== b) html += `<p>${b}: <b>R$ ${debts[a] && debts[a][b] ? debts[a][b] : 0}</b></p>`;
        });
        html += "<br>";
    });
    document.getElementById("debts").innerHTML = html;
}

function renderStats() {
    document.getElementById("closedRaffles").innerText = rafflesClosed;
    let html = "<h4>Vit√≥rias dos jogadores:</h4>";
    players.forEach(p => {
        html += `<p style="margin:4px 0">${p}: <b>${wins[p] || 0} vit√≥ria(s)</b></p>`;
    });
    document.getElementById("playerWins").innerHTML = html;
}

function renderHistory(){
  let html = '';
  for(let p = 1; p <= 10; p++){
    if(history[p] && history[p].length){
      html += `<h4>Partida ${p}</h4>`;
      html += history[p].map(h => `<p style="margin:4px 0">${h}</p>`).join('');
      html += '<hr style="opacity:0.2; margin:8px 0">';
    }
  }
  document.getElementById('history').innerHTML = html;
}

function clearHistory(){
  if(!confirm('Limpar hist√≥rico desta sala?')) return;
  history = {1: []}; currentPartida = 1;
  saveRoomState();
  renderHistory();
}

/* ---- GAME LOGIC ---- */
function startGame(){
    // reset round flags
    sequenceUsed = false;
    fourUsed = false;

    // reset previous data
    history = [];
    players = [];
    points = {};
    debts = {};
    wins = {};
    rafflesClosed = 0;

    raffleValue = Number(document.getElementById("raffleValue").value) || 10;
    document.getElementById("raffleValueDisplay").innerText = raffleValue;

    [p1.value, p2.value, p3.value, p4.value].forEach(n => {
        if (n && n.trim() !== "") players.push(n.trim());
    });

    if (players.length < 2) {
        alert("Coloque pelo menos 2 jogadores.");
        return;
    }

    players.forEach(a => {
        points[a] = 0;
        wins[a] = 0;
        debts[a] = {};
        players.forEach(b => debts[a][b] = 0);
    });

    renderGame(); renderDebts(); renderStats(); renderHistory();

    document.getElementById("gameArea").style.display = "block";
    document.getElementById("debtsArea").style.display = "block";
    document.getElementById("statsArea").style.display = "block";
    document.getElementById("historyArea").style.display = "block";

    saveRoomState();
}

function removerPontos(player, value) {
    if (points[player] !== undefined) {
        points[player] -= value;
        if (points[player] < 0) points[player] = 0;
        renderGame(); renderDebts(); renderStats(); saveRoomState();
    }
}

// centraliza todas as a√ß√µes (seq, four, bat9, bat10)
function handleAction(player, action){
  if(!players.includes(player)) return;

  if(action === 'seq'){
    if(sequenceUsed) return alert('Sequ√™ncia j√° foi feita nesta rodada!');
    sequenceUsed = true;
    history[currentPartida].push(`${player} fez SEQU√äNCIA`);
    points[player] = (points[player] || 0) + 1;
  }
  else if(action === 'four'){
    if(fourUsed) return alert('Four j√° foi feito nesta rodada!');
    fourUsed = true;
    history.push(`${player} fez FOUR`);
    points[player] = (points[player] || 0) + 1;
  }
  else if(action === 'bat9'){
    history.push(`${player} bateu com 9`);
    points[player] = (points[player] || 0) + 1;
    // batida N√ÉO fecha rifa
    endRound(player);
    return;
}
  }
  else if(action === 'bat10'){
    history.push(`${player} bateu com 10`);
    points[player] = (points[player] || 0) + 2;
    // batida N√ÉO fecha rifa
    endRound(player);
    return;
}
  }

  // se depois da a√ß√£o atingiu 10 -> vence rodada
  if(points[player] >= 10){
    history.push(`${player} venceu por acumular 10 pontos`);
    processWin(player);
    return;
  }

  renderGame(); renderDebts(); renderStats(); renderHistory(); saveRoomState();
}

function endRound(player){
  // batida N√ÉO fecha rifa ‚Äî apenas encerra a rodada
  history.push(`${player} encerrou a rodada (batida)`);

  // N√ÉO aplicar d√≠vidas aqui
  // N√ÉO contar vit√≥ria aqui

  // iniciar nova rodada
  sequenceUsed = false;
  fourUsed = false;

  // zerar pontos da rodada
  players.forEach(p => points[p] = 0);

  history.push('--- nova rodada iniciada ---');

  renderGame(); renderDebts(); renderStats(); renderHistory();
  saveRoomState();
}
}

function processWin(winner){
    // Apenas aqui deve aplicar d√≠vidas e vit√≥ria
    wins[winner] = (wins[winner] || 0) + 1;
    rafflesClosed++;

    history.push(`${winner} venceu a rifa com 10 pontos!`);

    players.forEach(other => {
        if (other === winner) return;
        let deveParaWinner = debts[other][winner] || 0;
        let winnerDeveParaOther = debts[winner][other] || 0;
        let valor = raffleValue;

        if (deveParaWinner > 0) debts[other][winner] += valor;
        else if (winnerDeveParaOther > 0) debts[winner][other] = Math.max(0, debts[winner][other] - valor);
        else debts[other][winner] = valor;
    });

    // Nova rodada p√≥s vit√≥ria
    sequenceUsed = false;
    fourUsed = false;
    players.forEach(p => points[p] = 0);
    history.push('--- nova rodada iniciada ---');

    renderGame(); renderDebts(); renderStats(); renderHistory();
    saveRoomState();();
}

/* ---- STORAGE / FIRESTORE ---- */
async function loadRooms() {
  try{
    let sel = document.getElementById("roomList"); sel.innerHTML = "";
    let snap = await db.collection("rooms").get();
    if (snap.empty) { sel.innerHTML = "<option>Nenhuma sala criada</option>"; return; }
    snap.forEach(doc => sel.innerHTML += `<option value="${doc.id}">${doc.id}</option>`);
  }catch(e){ console.error(e); alert('Erro ao carregar salas: '+e.message); }
}

async function createRoom(){
  let name = (document.getElementById('newRoomName').value || '').trim();
  let pass = (document.getElementById('newRoomPass').value || '').trim();
  if(!name||!pass) return alert('Preencha nome e senha!');
  await db.collection('rooms').doc(name).set({ pass, state: null });
  alert('Sala criada!'); loadRooms();
}

let unsubscribe = null;
async function enterRoom(){
  let name = (document.getElementById('roomList').value || '').trim();
  let pass = (document.getElementById('enterRoomPass').value || '').trim();
  if(!name) return alert('Selecione uma sala');
  let ref = db.collection('rooms').doc(name);
  let docSnap = await ref.get(); if(!docSnap.exists) return alert('Sala n√£o encontrada');
  if(docSnap.data().pass !== pass) return alert('Senha incorreta');

  currentRoom = name;
  if(unsubscribe) unsubscribe();
  unsubscribe = ref.onSnapshot(doc => {
    let data = doc.data();
    if(!data.state) return;
    loadRoomStateLive(data.state);
  });

  // if there's saved state, load it once
  if(docSnap.data().state) loadRoomStateLive(docSnap.data().state);

  roomScreen.style.display = 'none';
  mainApp.style.display = 'block';
}

function saveRoomState(){
  if(!currentRoom) return;
  let data = { sequenceUsed, fourUsed, history, players, points, debts, wins, raffleValue, rafflesClosed };
  db.collection('rooms').doc(currentRoom).update({ state: data }).catch(e=>console.error('save error',e));
}

function loadRoomStateLive(state){
  players = state.players || players;
  sequenceUsed = state.sequenceUsed || false;
  fourUsed = state.fourUsed || false;
  history = state.history || [];
  points = state.points || {};
  debts = state.debts || {};
  wins = state.wins || {};
  raffleValue = state.raffleValue || raffleValue;
  rafflesClosed = state.rafflesClosed || rafflesClosed;

  document.getElementById("raffleValueDisplay").innerText = raffleValue;
  renderGame(); renderDebts(); renderStats(); renderHistory();
  document.getElementById("gameArea").style.display = "block";
  document.getElementById("debtsArea").style.display = "block";
  document.getElementById("statsArea").style.display = "block";
  document.getElementById("historyArea").style.display = "block";
}

async function deleteRoom(){
  let name = (document.getElementById('roomList').value || '').trim();
  if(!name) return alert('Nenhuma sala selecionada.');
  let pass = prompt('Digite a senha da sala para excluir:'); if(!pass) return alert('Senha n√£o informada!');
  let ref = db.collection('rooms').doc(name); let snap = await ref.get(); if(!snap.exists) return alert('Sala n√£o encontrada');
  if(snap.data().pass !== pass) return alert('Senha incorreta!');
  if(!confirm(`Excluir a sala "${name}"?`)) return;
  await ref.delete(); alert('Sala exclu√≠da!'); loadRooms();
}

/* utils */
function flashWinner(name){ const bg = document.querySelector('.bg-glow'); if(!bg) return; bg.animate([{filter:'blur(80px) brightness(1)', opacity:0.9},{filter:'blur(40px) brightness(1.6)', opacity:1},{filter:'blur(80px) brightness(1)', opacity:0.9}],{duration:700,easing:'ease-out'}); }

</script>



<!-- MODAL SISTEMA -->
<div id="modalOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.65); backdrop-filter:blur(4px); z-index:9999; align-items:center; justify-content:center;">
  <div id="modalBox" style="background:#0f1720; padding:24px; border-radius:14px; width:90%; max-width:360px; border:1px solid rgba(255,255,255,0.1); box-shadow:0 0 18px rgba(0,0,0,0.6); text-align:center;">
      <h3 id="modalTitle" style="margin-bottom:12px; color:#00f5ff; font-family:Orbitron"></h3>
      <p id="modalMessage" style="margin-bottom:22px; color:#dfefff;"></p>
      <div id="modalInputContainer" style="display:none; margin-bottom:18px;">
         <input id="modalInput" type="password" placeholder="Digite aqui..." style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.04); color:white;">
      </div>
      <button id="modalCancel" style="padding:10px 18px; margin-right:10px; border:none; border-radius:8px; background:#444; color:white; cursor:pointer;">Cancelar</button>
      <button id="modalOk" style="padding:10px 18px; border:none; border-radius:8px; background:linear-gradient(90deg,#00f5ff,#ff3ecf); color:#021018; cursor:pointer; font-weight:700;">OK</button>
  </div>
</div>

<script>
function showModal(title, message, options={}){
    return new Promise(resolve => {
        const overlay = document.getElementById('modalOverlay');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalInputContainer = document.getElementById('modalInputContainer');
        const modalInput = document.getElementById('modalInput');
        const btnOk = document.getElementById('modalOk');
        const btnCancel = document.getElementById('modalCancel');

        modalTitle.textContent = title;
        modalMessage.textContent = message;

        if(options.input){ modalInputContainer.style.display = 'block'; modalInput.value = ''; }
        else{ modalInputContainer.style.display = 'none'; }

        overlay.style.display = 'flex';

        btnOk.onclick = () =>{
            overlay.style.display = 'none';
            resolve(options.input ? modalInput.value : true);
        }
        btnCancel.onclick = () =>{
            overlay.style.display = 'none';
            resolve(false);
        }
    });
}

// substituir alert
function alert(msg){ return showModal('Aviso', msg); }

// substituir confirm
function confirm(msg){ return new Promise(async res=>{ let r = await showModal('Confirmar', msg); res(r); }); }

// substituir prompt
function prompt(msg){ return new Promise(async res=>{ let r = await showModal('Confirma√ß√£o', msg, {input:true}); res(r); }); }
</script>

</body>
</html>
