<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rifa dos músicos</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0f16;
    --panel:#0f1720;
    --neon1:#00f5ff;
    --neon2:#ff3ecf;
    --accent:#ffd166;
    --glass: rgba(255,255,255,0.04);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    background: radial-gradient(circle at 10% 10%, rgba(2,6,23,1) 0%, rgba(8,11,18,1) 35%, rgba(6,7,11,1) 100%);
    font-family: "Inter",system-ui;
    color:#fff; 
    overflow:auto;
  }

  .bg-layer{
    position:fixed; inset:0; z-index:0; pointer-events:none;
  }

  .bg-glow{
    position:absolute; width:1600px; height:1600px; left:50%; top:-30%;
    transform:translateX(-50%);
    background: linear-gradient(135deg, rgba(0,245,255,0.08), rgba(255,62,207,0.06));
    filter: blur(80px); opacity:0.9;
  }

  .suits { position:absolute; inset:0; }
  .suit{
    position:absolute; font-size:80px; opacity:0.12;
    transform-origin:center;
    animation: floatSuit linear infinite;
  }
  @keyframes floatSuit {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity:0.06; }
    50% { transform: translateY(-60px) rotate(20deg) scale(1.05); opacity:0.12; }
    100% { transform: translateY(0) rotate(0deg) scale(1); opacity:0.06; }
  }

  .cards { position:absolute; inset:0; }
  .card{
    position:absolute; width:140px; height:200px;
    border-radius:12px;
    background:#fff;
    opacity:0.07;
    animation: floatCard linear infinite;
  }
  @keyframes floatCard {
    0% { transform: translateY(0) scale(1); opacity:0.07; }
    50% { transform: translateY(-40px) scale(1.02); opacity:0.12; }
    100% { transform: translateY(0) scale(1); opacity:0.07; }
  }

  .app{
    position:relative; z-index:2;
    min-height:100vh;
    display:flex; align-items:center; justify-content:center;
    padding:28px 0;
  }

  .center{
    width:100%; max-width:1100px;
    margin:24px;
    display:flex; gap:24px;
    max-height: calc(100vh - 120px);
    overflow:auto;
  }

  .panel{
    background: rgba(255,255,255,0.02);
    border-radius:14px;
    padding:26px;
    border:1px solid rgba(255,255,255,0.04);
    backdrop-filter: blur(6px);
  }

  .splash{
    width:100%; height:100vh;
    display:flex; align-items:center; justify-content:center;
    flex-direction:column;
    text-align:center;
    padding:40px;
  }

  .title{
    font-family:"Orbitron";
    font-size:48px;
    color:var(--neon1);
  }

  .enterBtn{
    margin-top:28px;
    padding:20px 36px;
    font-size:22px; border-radius:999px;
    background:linear-gradient(90deg,var(--neon1),var(--neon2));
    color:#021018; font-weight:700;
    cursor:pointer;
  }

  .box{ padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); }

  input{
    width:100%; padding:14px 12px;
    background:rgba(255,255,255,0.02);
    color:#fff; border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
  }

  button.btn{
    padding:14px 18px; border-radius:10px;
    font-weight:700; border:none; cursor:pointer;
    background:linear-gradient(180deg,var(--neon1),var(--neon2));
    color:#021018;
    margin:4px;
  }

  .credits{
    position:fixed; right:20px; bottom:18px;
    font-size:13px; color:#ffdede;
  }
</style>
</head>
<body>

  <!-- BACKGROUND -->
  <div class="bg-layer">
    <div class="bg-glow"></div>

    <div class="suits" id="bgSuits">
      <div class="suit">♠</div>
      <div class="suit">♥</div>
      <div class="suit">♦</div>
      <div class="suit">♣</div>
      <div class="suit">♠</div>
      <div class="suit">♥</div>
      <div class="suit">♦</div>
      <div class="suit">♣</div>
    </div>

    <div class="cards">
      <div class="card"></div>
      <div class="card"></div>
      <div class="card"></div>
    </div>
  </div>

  <!-- APP -->
  <div class="app">

    <!-- SPLASH -->
    <div id="splashScreen" class="splash">
      <div class="panel">
        <div class="title">Rifa dos músicos</div>
        <button id="enterBtn" class="enterBtn">Entrar</button>
      </div>
    </div>

    <!-- WELCOME -->
    <div id="welcomeScreen" class="splash" style="display:none;">
      <div class="panel">
        <h2>Bem-vindo!</h2>
        <button id="toAppBtn" class="btn">Entrar no sistema</button>
      </div>
    </div>

    <!-- MAIN -->
    <div id="mainApp" style="display:none; width:100%;">
      <div class="center">
        <div class="leftCol">

          <div class="panel box">
            <h1 class="appTitle">Sistema de Pontos</h1>

            <label>Valor da rifa</label>
            <input id="raffleValue" type="number" value="10">

            <label style="margin-top:10px;">Jogadores</label>
            <input id="p1" placeholder="Jogador 1">
            <input id="p2" placeholder="Jogador 2" style="margin-top:8px">
            <input id="p3" placeholder="Jogador 3 (opcional)" style="margin-top:8px">
            <input id="p4" placeholder="Jogador 4 (opcional)" style="margin-top:8px">

            <button class="btn" onclick="startGame()">Iniciar</button>
          </div>

          <div id="statsArea" class="panel box" style="display:none;">
            <h3>Estatísticas</h3>
            <p><b>Valor da rifa:</b> R$ <span id="raffleValueDisplay">0</span></p>
            <p><b>Rifas fechadas:</b> <span id="closedRaffles">0</span></p>
            <div id="playerWins"></div>
          </div>

        </div>

        <div class="rightCol">
          <div id="gameArea" class="panel box" style="display:none;"></div>
          <div id="debtsArea" class="panel box" style="display:none;">
            <h3>Dívidas</h3>
            <div id="debts"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="credits">Feito por DuduPlay</div>

<script>

let players = [];
let points = {};
let debts = {};
let wins = {};
let raffleValue = 10;
let rafflesClosed = 0;

document.getElementById("enterBtn").onclick = () => {
  splashScreen.style.display = "none";
  welcomeScreen.style.display = "flex";
};

document.getElementById("toAppBtn").onclick = () => {
  welcomeScreen.style.display = "none";
  mainApp.style.display = "block";
};

/* FUNÇÕES DO JOGO */

function startGame(){
    players = [];
    raffleValue = Number(document.getElementById("raffleValue").value) || 10;
    document.getElementById("raffleValueDisplay").innerText = raffleValue;

    [p1.value, p2.value, p3.value, p4.value].forEach(n => {
        if(n.trim()) players.push(n.trim());
    });

    if(players.length < 2){
        alert("Mínimo 2 jogadores.");
        return;
    }

    players.forEach(a=>{
        points[a] = 0;
        wins[a] = 0;
        debts[a] = {};
        players.forEach(b=>debts[a][b]=0);
    });

    renderGame();
    renderDebts();
    renderStats();

    gameArea.style.display = "block";
    debtsArea.style.display = "block";
    statsArea.style.display = "block";
}

function renderGame(){
    let html = `<h2>Pontuar Jogadores</h2>`;

    players.forEach(p=>{
        html += `
        <div class="box" style="margin-bottom:20px;">
          <h3>${p} — ${points[p]} pontos</h3>

          <button class="btn" onclick="addPoint('${p}',1)">Sequência (1)</button>
          <button class="btn" onclick="addPoint('${p}',1)">Four (1)</button>
          <button class="btn" onclick="addPoint('${p}',1)">Batida 9 (1)</button>
          <button class="btn" onclick="addPoint('${p}',2)">Batida 10 (2)</button>

          <!-- BOTÕES DE REMOVER PONTOS -->
          <div style="margin-top:10px;">
            <button class="btn" style="background:linear-gradient(90deg,#ff4d4d,#ff1a1a)" onclick="removePoint('${p}',1)">-1 ponto</button>
            <button class="btn" style="background:linear-gradient(90deg,#ff4d4d,#cc0000)" onclick="removePoint('${p}',2)">-2 pontos</button>
          </div>
        </div>`;
    });

    gameArea.innerHTML = html;
}

function addPoint(player, value){
    points[player] += value;
    if(points[player] >= 10) processWin(player);
    renderGame(); renderDebts(); renderStats();
}

function removePoint(player, value){
    points[player] -= value;
    if(points[player] < 0) points[player] = 0;
    renderGame(); renderDebts(); renderStats();
}

function processWin(winner){
    wins[winner]++;
    rafflesClosed++;

    players.forEach(other=>{
        if(other === winner) return;

        let deve = debts[other][winner];
        let winnerDeve = debts[winner][other];

        if(deve > 0){
            debts[other][winner] += raffleValue;
        } else if(winnerDeve > 0){
            debts[winner][other] -= raffleValue;
            if(debts[winner][other] < 0) debts[winner][other] = 0;
        } else {
            debts[other][winner] = raffleValue;
        }
    });

    players.forEach(p=>points[p]=0);

    alert(winner + " ganhou a rifa!");
}

function renderDebts(){
    let html = "";
    players.forEach(a=>{
        html += `<h3>${a} deve:</h3>`;
        players.forEach(b=>{
            if(a!==b) html += `<p>${b}: <b>R$ ${debts[a][b]}</b></p>`;
        });
        html += "<br>";
    });
    debts.innerHTML = html;
}

function renderStats(){
    closedRaffles.innerText = rafflesClosed;
    let html = "<h4>Vitórias:</h4>";
    players.forEach(p=>{
        html += `<p>${p}: <b>${wins[p]}</b></p>`;
    });
    playerWins.innerHTML = html;
}

</script>

</body>
</html>
